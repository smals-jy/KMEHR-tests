---
description: How to test the new KMEHR version impacts on Medication Scheme ?
title: ⚠️ KMEHR 1.40.2 testing
---

## Why ?

In a upcoming future, the [Medication Scheme specifications](https://www.ehealth.fgov.be/standards/kmehr/en/transactions/medication-scheme) are going to be updated with a new KMEHR version, more authorized values, ... .
So a testing plan could be handy to prepare your software to that.

## Prerequisites

- Clone the Github project, e.g. `git clone https://github.com/smals-jy/KMEHR-tests`
- Node.JS LTS
- Install Github project dependancies, e.g. `npm install`

## Steps

1. Update the [`template file`](https://github.com/smals-jy/KMEHR-tests/blob/main/TEMPLATES/PARTIAL_MS.xml) to use the new KMEHR version

  ```xml title="TEMPLATES/PARTIAL.xml (Before)"
      <!-- KMEHR 1.28.0 version id -->
      <cd S="CD-STANDARD" SV="1.4">20161201</cd>
  ```

  ```xml title="TEMPLATES/PARTIAL.xml (Before)"
      <!-- KMEHR 1.40.2 version id -->
      <cd S="CD-STANDARD" SV="1.4">20231110</cd>
  ```

2. To generate the resulting XML file(s) in [`output/ms`][MS_OUTPUT_FOLDER] folder :

```bash
npm start
```

3. Check that each testing scenario explained on [the documentation](https://smals-jy.github.io/KMEHR-tests/docs/category/-read-scenarios) still work for you with these updated files

4. Test these new test scenarios

<details>

      <summary>Toggle me!</summary>

      Create a `BK-01-CD-ADMINISTRATIONUNIT.ts` file in the [`configurations/ms`][MS_CONFIG_FOLDER] folder with following content :

      ```ts title="configurations/ms/BK-01-CD-ADMINISTRATIONUNIT.ts"
        import type { Configuration, AdministrationUnit } from "../../src/config";
        
        export default function (): Configuration {
          // List of administration-unit
          const ADMINISTRATION_UNITS: AdministrationUnit[] = [
            // @ts-ignore
            "ampoule",
            // @ts-ignore
            "bandage",
            // @ts-ignore
            "bottle",
            // @ts-ignore
            "box",
            // @ts-ignore
            "effervescent-tablet",
            // @ts-ignore
            "iu",
            // @ts-ignore
            "liter",
            // @ts-ignore
            "meq",
            // @ts-ignore
            "micrograms",
            // @ts-ignore
            "miu",
            // @ts-ignore
            "mmol",
            // @ts-ignore
            "piece",
            // @ts-ignore
            "syringe",
            // @ts-ignore
            "syringe-ampoule"
          ];
        
          // Generate ADMINISTRATION UNIT entries
          return {
            transactions: ADMINISTRATION_UNITS.map((unit, idx) => {
              return {
                id: idx + 2,
                drug: {
                  drugType: "compoundprescription",
                  compoundprescriptionText: `${unit}`,
                  temporality: "chronic",
                  periodicity: "D",
                  regimen: [
                    // To test singular case
                    {
                      quantity: 1.0,
                      timeOfDay: {
                        dayPeriod: "morning",
                      },
                      unit: unit,
                    },
                    // To test plural case
                    {
                      quantity: 5.0,
                      timeOfDay: {
                        dayPeriod: "beforedinner",
                      },
                      unit: unit,
                    },
                  ],
                },
              };
            }),
          };
        }
      ```

</details>


[MS_OUTPUT_FOLDER]: https://github.com/smals-jy/KMEHR-tests/tree/main/output/ms
[MS_CONFIG_FOLDER]: https://github.com/smals-jy/KMEHR-tests/tree/main/configurations/ms
